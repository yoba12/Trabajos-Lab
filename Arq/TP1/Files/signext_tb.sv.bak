module flopr_tb();
/* 
b) Realizar un testbench que:
	- Ingrese por el puerto a todos los tipos de instrucciones detalladas en la tabla, con
	inmediatos positivos y negativos, y verifique que la salida sea la correcta.
	- Ingrese instrucciones que no est√©n en la tabla y verifique que la salida sea 0.
*/

	logic clk, reset, d, yexpected;
	logic q;
	parameter DATA_WIDTH = 31;
	
	logic [31:0] vectornum, errors;
	logic [DATA_WIDTH-1:0] testvectors [13:0] = '{ 
			11111000010_00000011_01_00001_00010,
			
													 };
	//instance
	flopr dut(clk, reset, d, q);
	
	//clock generation @100MHz 10ns
	always
		begin
				clk = 1; #10000; clk=0; #10000;
		end
	
	//Test pulse 
	initial 
		begin
			vectornum = 0; errors = 0; reset = 0; #10;
			reset = 1;

		end
		// apply test vectors on rising edge of clk
		always @(posedge clk)
			begin
				#1; {d, yexpected} = testvectors[vectornum];
			end
			
		// falling edge of clk
		always @(negedge clk)
		if (reset) begin // skip during reset
			if (q !== yexpected)
				begin
				$display("Error: inputs = %b", {d});
				$display("outputs = %b (%b expected)",q,yexpected);
				errors = errors + 1;
				end
				
			vectornum = vectornum + 1; //+1 in vector
		
			if (testvectors[vectornum] === 64'bx)
			begin
				$display("%d tests completed with %d errors",vectornum, errors);
				$stop;
			end
			
		else
			if(vectornum <= 5)
				reset = 1;
			else 
				reset = 0;
				
				
		end
endmodule
				